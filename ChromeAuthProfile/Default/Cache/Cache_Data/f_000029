"use strict";(globalThis.webpackChunkphoto8=globalThis.webpackChunkphoto8||[]).push([[503],{6297:(e,t,a)=>{a.d(t,{d:()=>o});var l=a(75058),n=a(5318),r=a(22129);const o=()=>({showError:e=>{n.Ay.dispatch((0,l.error)((0,r.A)(e.toString())))},showSuccess:e=>{n.Ay.dispatch((0,l.success)((0,r.A)(e)))}})},11181:(e,t,a)=>{a.d(t,{A:()=>n});var l=a(65043);const n=(e=[])=>{const t=()=>e.reduce((e,t)=>({...e,[t]:!1}),{}),[a,n]=(0,l.useState)(t());return{modalVisible:a,toggleModalVisible:e=>{n(t=>({...t,...e}))},getDefaultModalVisibilityState:t,resetModalVisible:()=>n(t())}}},14992:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAABXUlEQVQ4jaXTz0uUURTG8c/8wMIEIWgXEuIm/BG0jUjyP1AiQwZSdNPaclVEkCsJ2gti7gZBbdMmQgVbKUgtZuFOd0kUFIOROi3ufRdOd2akns15ufe+33vOec7NPRgraaEi7qAvfu/jPb7VH2qme5hDV936T7zCC5xAvgnkMco4xiP0ogcj2MYzrKIAhf6BGynIXSxhHYPYwmEsp4I3uISHqGG9UUbP8T2W9iOxX8MTbMTMO1OgK7gVM/ra4KIM9hrtGEqBrgm9220CyfQpxu4U6DTGC+cAtcV4nAJV8EtocivdjvFzClTFmmBz0tKoDszgAJuNXHuKHN42gF3GCroxjd+pyc7Hmwq4KgzfsmD1EW6ihE5hKMv8/UTymMc4FjCLlxjGaDxTw8cI+ZD9WGwCmRQcvC/MynVcxB6+1JdRbAHJVMVOog1nsmgFOZfymPpfCKG0d5jA4r9C4A/57kzRWoo+QwAAAABJRU5ErkJggg=="},16335:(e,t,a)=>{a.d(t,{FL:()=>c,N:()=>s,X7:()=>m,cg:()=>u,yN:()=>d,zL:()=>i});var l=a(40854),n=a.n(l),r=a(73936);const o=async(e,t,a)=>{const l=await n().post(`${r.U.backendUrl}${e}?query=${t.trim()}`,{Page:a,PageSize:50});return{Code:l.data.Code,Result:l.data.Result}},s=(e,t)=>o("/Common/Factory/Search",e,t),c=(e,t)=>o("/Common/Reference/Search",e,t),i=(e,t)=>o("/Common/Color/Search",e,t),d=(e,t)=>o("/Common/Label/Search",e,t),u=(e,t)=>o("/Common/Customer/Search",e,t),m=(e,t)=>o("/Common/Country/Search",e,t)},18182:(e,t,a)=>{a.d(t,{m:()=>r});var l=a(65043),n=a(13555);const r=({onSubmit:e})=>{const[t,a]=(0,l.useState)({}),[r,o]=(0,l.useState)({}),s=e=>{a(e),o(e)};return{values:t,setValues:s,setFieldValue:(e,t)=>{a(a=>({...a,[e]:t}))},clear:()=>s({}),isEdited:()=>!(0,n.equals)(t,r),isEmpty:()=>(0,n.isEmpty)(t),submit:a=>{a&&a.preventDefault(),e(t)}}}},21645:(e,t,a)=>{a.d(t,{A:()=>r});var l=a(65043),n=a(90441);const r=({show:e,hide:t})=>l.createElement(n.A,{show:e,icon:"icon-error",handleToggle:t},"The data was not saved because a request for the provided information already exists.")},23133:(e,t,a)=>{a.d(t,{Y:()=>r});var l=a(13555),n=a(58839);const r=(e,t)=>{const a=[];return Object.keys(e).forEach(r=>{const o=e[r];if(t&&t[r]){const e=t[r](r,o);e&&a.push(e)}else Array.isArray(o)?o.length>0&&a.push({Field:r,Operator:"ContainsAny",Value:o.map(e=>e.code).join(",")}):(0,l.isString)(o)?o.length>0&&("Text"===r?a.push({Field:r,Value:o}):a.push({Field:r,Operator:"Contains",Value:o})):o&&(Object.keys(o).includes("from")||Object.keys(o).includes("to")?(o.from&&a.push({Field:r,Operator:"GreaterDate",Value:(0,n.Bq)(o.from)}),o.to&&a.push({Field:r,Operator:"LessDate",Value:(0,n.Bq)(o.to)})):Object.keys(o).includes("code")?a.push({Field:r,Operator:"Equals",Value:o.code}):a.push({Field:r,Value:o}))}),{Filters:a}}},40545:(e,t,a)=>{a.d(t,{In:()=>o,fV:()=>s,Ay:()=>c});var l=a(65043),n=a(98139),r=a.n(n);const o=({className:e,children:t})=>l.createElement("div",{className:r()({"header-content-left":!0,[e]:!!e})},t),s=({className:e,children:t})=>l.createElement("div",{className:r()({"header-content-right":!0,[e]:!!e})},t),c=({className:e,children:t,isVisible:a})=>a?l.createElement("div",{className:r()({"header-content-flex-wrapper":!0,[e]:!!e})},t):null},42065:(e,t,a)=>{a.d(t,{A:()=>D});var l={};a.r(l),a.d(l,{toggleDesignersView:()=>u,toggleSidebar:()=>d});var n=a(65043),r=a(77048),o=a(97508),s=a(10778),c=a(91688),i=a(10320);function d(){return{type:i.o8}}function u(){return{type:i.e0}}var m=a(26369),h=a(98139),v=a.n(h),p=a(36932);const f=({children:e,handleSidebarToggle:t,className:a})=>{const l=v()("main-header",{[a]:!0});return n.createElement("header",{className:l},n.createElement("button",{className:"btn btn--empty",onClick:t,type:"button"},n.createElement(p.A,{glyph:"icon-hamburger"})),e)};f.defaultProps={className:""};const y=f;var S=a(49311),E=a.n(S),b=a(38591),g=a(35772);const C=({name:e})=>{if(!e)return null;const t=null===e||void 0===e?void 0:e.split(" ");return n.createElement("div",{className:"default-avatar"},t[0][0],t[1][0])},N=({user:e,handleLogout:t,className:a})=>{var l,r,o,s,c;return n.createElement("div",{className:`header-user-info ${a}`},n.createElement(E(),{id:"user-menu"},n.createElement(E().Toggle,{className:"header-user-info__dropdown-toggle"},n.createElement(C,{name:e.name})),n.createElement(E().Menu,null,n.createElement("div",{className:"menu-item-wrapper"},n.createElement("div",{className:"name"},e.name),n.createElement("div",{className:"email"},e.email),n.createElement("div",{className:"permissions"},n.createElement(b.A,null,n.createElement(b.D,{name:"Roles",box:!0,className:"roles"},null===(l=e.userRoles)||void 0===l?void 0:l.map(e=>n.createElement("div",{key:e},e))),!(null===(r=e.factoryCodes)||void 0===r||!r.length)&&n.createElement(b.D,{name:"Factory Codes",box:!0},null===(o=e.factoryCodes)||void 0===o?void 0:o.join(", ")),!(null===(s=e.vendorCodes)||void 0===s||!s.length)&&n.createElement(b.D,{name:"Vendor Codes",box:!0},null===(c=e.vendorCodes)||void 0===c?void 0:c.join(", ")))),n.createElement(g.A,{type:"primary",onClick:t},"Logout")))))},A=({title:e,user:t,handleLogout:a,small:l,userInfoClassName:r})=>n.createElement("div",{className:"default-header simple"},n.createElement("h1",{className:"default-header__title"},e),n.createElement(N,{className:r,user:t,handleLogout:a,small:l})),F={handleSidebarToggle:e=>()=>{e.layoutActions.toggleSidebar()},handleLogout:()=>()=>{const e=`https://hub.haddad.com/SignOut.aspx?winauth=false&ReturnApp=${encodeURIComponent(window.location)}`;(0,m.eF)(),window.location.href=e}};const D=(0,s.Zz)((0,o.connect)(function(e){return{user:e.user,userSettings:e.userSettings,designersView:e.layout.designersView}},function(e){return{layoutActions:(0,r.bindActionCreators)(l,e)}}),(0,s.n7)(F))(({title:e,user:t,handleSidebarToggle:a,handleLogout:l,children:r,className:o,userInfoClassName:s,small:i})=>r?n.createElement(y,{className:o,handleSidebarToggle:a},n.createElement("div",{className:"default-header"},n.createElement("div",{className:"default-header__container"},r,n.createElement(N,{className:s,small:i,user:t,handleLogout:l})))):n.createElement(c.dO,null,n.createElement(c.qh,null,n.createElement(y,{handleSidebarToggle:a},n.createElement(A,{userInfoClassName:"header-user-info__small",title:e,user:t,handleLogout:l,small:!0})))))},43086:(e,t,a)=>{a.d(t,{A:()=>s});var l=a(65043),n=a(77048),r=a(97508),o=a(74350);const s=(0,r.connect)(({dictionaries:e})=>({dictionaries:e}),e=>({dictionariesActions:(0,n.bindActionCreators)(o,e)}))(({dictionaries:e,dictionariesActions:t,children:a})=>((0,l.useEffect)(()=>{t.fetchStatusDict()},[]),l.createElement(l.Fragment,null,a({findStatusId:t=>{var a,l;return null===(a=e.statuses)||void 0===a||null===(l=a.find(e=>e.Name.toLowerCase().includes(t)))||void 0===l?void 0:l.Id}}))))},50732:(e,t,a)=>{a.d(t,{q:()=>r});var l=a(65043),n=a(73936);const r=(e=(e=>null===n.U||void 0===n.U||null===(e=n.U.seasonYear)||void 0===e?void 0:e.startYear)(),t=(e=>null===n.U||void 0===n.U||null===(e=n.U.seasonYear)||void 0===e?void 0:e.range)())=>{const a=["Spring","Summer","Fall","Holiday"];let r=e||(new Date).getFullYear();const[o,s]=(0,l.useState)([]),[c,i]=(0,l.useState)([]);return(0,l.useEffect)(()=>{var e;const l=(null===n.U||void 0===n.U||null===(e=n.U.seasonYear)||void 0===e?void 0:e.predefinedValues)||[];for(let n=r;n<=r+t;n++)a.forEach(e=>l.push(`${e} ${n}`));s(l),i(l.map(e=>({Id:e,Name:e})))},[]),[o,c]}},51404:(e,t,a)=>{a.d(t,{A:()=>r});var l=a(65043),n=a(92127);const r=({clearButtonTooltip:e="Clear",onClear:t})=>l.createElement("div",{className:"field-clear-button",onClick:t,title:e},l.createElement(n.g,{icon:["far","times-circle"]}))},73383:(e,t,a)=>{a.d(t,{A:()=>n});var l=a(65043);const n=l.forwardRef(({mainPath:e,isEdited:t=!1,canSave:a=!0,values:n,onSave:r,children:o},s)=>{const c=(0,l.useRef)(),i=(0,l.useRef)(),d=(0,l.useRef)();return(0,l.useEffect)(()=>()=>{window.location.pathname.includes(e)&&i.current&&d.current&&r(c.current)},[]),(0,l.useEffect)(()=>{c.current=n},[n]),(0,l.useEffect)(()=>{i.current=t},[t]),(0,l.useEffect)(()=>{d.current=a},[a]),(0,l.useImperativeHandle)(s,()=>({save:e=>r({...c.current,...e}),canSave:()=>d.current})),o})},74350:(e,t,a)=>{a.r(t),a.d(t,{fetchControlSheet:()=>E,fetchFactoryDict:()=>d,fetchGroupNameDict:()=>v,fetchGroupTypeDict:()=>h,fetchPoNumbers:()=>y,fetchRequestTypeDict:()=>p,fetchStatusDict:()=>m,fetchStyles:()=>S,fetchUnitSystemDict:()=>f,fetchVendorDict:()=>u});var l=a(40854),n=a.n(l),r=a(73936),o=a(10320),s=a(23133),c=a(58839);const i=(e,t,a,l)=>async o=>{o({type:t});const s=await n().post(`${r.U.backendUrl}/Dictionary/${e}`);return 200===s.data.Code?o({type:a,payload:s.data.Result}):o({type:l})},d=()=>i("Factory",o.nv,o.Zv,o.Sl),u=()=>i("Vendor",o.jt,o.xN,o.Ey),m=()=>i("Status",o.rP,o.Nz,o.sS),h=()=>i("GroupType",o.h1,o.TV,o.wZ),v=()=>i("GroupName",o.il,o.Ub,o.Bc),p=()=>i("RequestType",o.BU,o.lh,o.qJ),f=()=>i("UnitSystem",o.Fe,o.Rt,o.qF),y=e=>async()=>{try{const t=await n().post(`${r.U.backendUrl}/Common/Po/Search`,{...(0,s.Y)(e,{ShipDate:(e,t)=>({Field:e,Value:t.map(c.GV)})})});if(200===t.data.Code)return t.data.Result.Items;throw new Error(t.data.Message)}catch(t){throw t}},S=e=>async()=>{try{const t=await n().post(`${r.U.backendUrl}/Common/Style/Search?refNo=${e}`);if(200===t.data.Code)return t.data.Result;throw new Error(t.data.Message)}catch(t){throw t}},E=e=>async t=>{try{t({type:o.FJ});const a=await n().post(`${r.U.backendUrl}/ControlSheet/${e}`);if(200==a.data.Code)return t({type:o.vD}),a.data.Result;throw new Error(a.data.Error)}catch(a){throw t({type:o.gv}),a}}},75787:(e,t,a)=>{a.d(t,{A:()=>n});var l=a(65043);const n=(...e)=>{const t=(0,l.useRef)([...e]),[a,n]=(0,l.useState)([...e]);(0,l.useEffect)(()=>{document.title=[...a,"Photo8"].join(" | ")},[a]);return{updateTitle:e=>n([e,...t.current])}}},83810:(e,t,a)=>{a.d(t,{RZ:()=>u,St:()=>h,Ay:()=>m});var l=a(65043),n=a(98139),r=a.n(n),o=a(44238),s=a(14992),c=a(51404);const i=({showClearButton:e=!0,onClear:t,children:a})=>l.createElement("div",{className:"selected-item"},l.createElement("div",{className:"value"},a,e&&l.createElement(c.A,{clearButtonTooltip:"Remove",onClear:t}))),d=({selected:e,itemsToIgnore:t=[],placeholder:a,onSearch:n,keyField:c="Id",inGroup:d=!1,disabled:u=!1,onSelect:m,onBlur:h,children:v})=>{const p=(0,l.useRef)(null),f=(0,l.useRef)(null),[y,S]=(0,l.useState)(""),[E,b]=(0,l.useState)(1),[g,C]=(0,l.useState)(0),[N,A]=(0,l.useState)(!1),[F,D]=(0,l.useState)(!1),[w,V]=(0,l.useState)([]),R=t.map(e=>e[c]),I=async e=>{A(!0);const t=await n(y,e),{Code:a,Result:l}=t;200===a&&(1===e?(V(l.Items),1===l.Items.length?(m(l.Items[0]),S(""),d?(V([]),C(0)):(D(!1),f.current.blur())):C(l.Total)):V([...w,...l.Items])),A(!1)},k=()=>{V([]),C(0),D(!0),I(E)};return(0,l.useEffect)(()=>{const e=e=>{p&&p.current&&!p.current.contains(e.target)&&D(!1)};return document.addEventListener("mousedown",t=>e(t)),()=>{document.removeEventListener("mousedown",t=>e(t))}},[]),l.createElement("div",{ref:p,className:r()({"searchable-dropdown":!0,disabled:u})},l.createElement("input",{ref:f,className:r()({selected:!!e}),type:"text",value:e?"":y,placeholder:a,onChange:e=>{S(e.target.value),b(1)},onKeyDown:e=>{!N&&y.length>0&&"enter"===e.key.toLowerCase()&&(e.preventDefault(),k()),"escape"===e.key.toLowerCase()&&(D(!1),e.target.blur()),N||"tab"!==e.key.toLowerCase()||y.length>0&&k()},onFocus:()=>{!e&&w.length>0&&D(!0)},onPaste:e=>{const t=(e.clipboardData||window.clipboardData).getData("text");S(t.trim()),e.preventDefault()},onBlur:h}),e&&l.createElement(i,{showClearButton:!u&&!d,onClear:()=>{S(""),m(null),V([]),C(0),f.current.focus()}},v(e)),!e&&!u&&l.createElement("div",{className:"actions"},l.createElement("div",{className:r()({search:!0,disabled:!y}),onClick:k},l.createElement("img",{src:s,alt:"",title:"Search"}))),F&&l.createElement("div",{className:"list",style:{width:f.current?`${f.current.offsetWidth}px`:"auto"}},(R.length?w.filter(e=>!R.includes(e[c])):w).map(e=>l.createElement("div",{key:e[c],className:"item",onClick:()=>{S(""),m(e),D(!1),V([]),C(0),d&&f.current.focus()}},v(e))),!N&&w.length<g&&l.createElement("div",{className:"load-more",onClick:()=>(()=>{const e=E+1;b(e),I(e)})()},"Load more..."),N&&l.createElement("div",{className:"spinner-wrapper"},l.createElement(o.A,{isVisible:!0,size:25}))))},u=({selectedItems:e=[],placeholder:t,onSearch:a,labelField:n,keyField:o,disabled:s,onBlur:c,onAdd:u,onDelete:m,children:h})=>{const[v,p]=(0,l.useState)(null);return l.createElement("div",{className:r()({"searchable-dropdown-group":!0,disabled:s})},!s&&l.createElement(d,{disabled:s,selected:v,placeholder:t,labelField:n,keyField:o,itemsToIgnore:e,onSearch:a,inGroup:!0,onSelect:t=>{t&&!e.some(e=>e[o]===t[o])&&(u(t),p(null))},onBlur:c},e=>h(e)),l.createElement("div",{className:"selected-items"},e.map(e=>l.createElement(i,{key:e[o],showClearButton:!s,onClear:()=>m(e)},e[n]))))},m=d,h=e=>new Promise(t=>{t({Code:200,Result:{Items:e}})})},90441:(e,t,a)=>{a.d(t,{A:()=>i});var l=a(65043),n=a(66313),r=a.n(n),o=a(72287),s=a(36932);const c=({show:e,children:t,buttonLabel:a,handleToggle:n,icon:c})=>l.createElement(o.A,{show:e,onHide:n,className:"modal-default"},l.createElement(r().Body,{className:"message-modal"},l.createElement(s.A,{glyph:c||"comment_resolved",width:40,height:40}),t),l.createElement(r().Footer,null,l.createElement("button",{className:"btn btn-primary",onClick:n,type:"button"},a)));c.defaultProps={buttonLabel:"OK"};const i=c},90765:(e,t,a)=>{a.d(t,{A:()=>N});var l=a(65043),n=a(24168),r=a(53536),o=a(98139),s=a.n(o),c=a(18527),i=a(92265),d=a(83810),u=a(58839),m=a(18182),h=a(6297),v=a(50732),p=a(16335),f=a(38591),y=a(73383),S=a(56329),E=a(36296);const b=({className:e,idField:t="Id",labelField:a="Name",selected:n=[],list:r=[],disabled:o,isFetching:c,onToggle:i})=>{const d=e=>n.map(e=>m(e)).includes(m(e)),u=e=>e[a],m=e=>e[t];return l.createElement("div",{className:s()({"checkbox-list":!0,[e]:!!e})},r.filter(e=>!!m(e)&&!!u(e)).map(e=>l.createElement("div",{className:"item",key:m(e)},l.createElement("input",{disabled:o,id:m(e),type:"checkbox",checked:d(e),onChange:t=>i(e,t.target.checked)}),l.createElement("label",{htmlFor:m(e)},u(e)))),l.createElement(E.A,{isVisible:c,size:100}))};var g=a(35772);const C=({isVisible:e,onFetch:t,onFetchFactory:a,onFill:n})=>{const[r,o]=(0,l.useState)(""),{showError:s}=(0,h.d)(),c=e=>{const t=null===e||void 0===e?void 0:e.split(" ");if(null===t||void 0===t||!t.length)return"";const a=t[1]||"";let l="";switch(t[0]){case"F":l="Fall";break;case"H":l="Holiday";break;case"M":l="Summer";break;case"S":l="Spring"}return[l,a].join(" ")};return e?l.createElement("form",{className:"po-filler",onSubmit:async e=>{try{var l,i;e.preventDefault();let s=r;if(!r||r.length<6)return;6!==r.length||r.startsWith("0")||(s=`0${r}`);const d=await t(s),u=null===(l=d.Factory)||void 0===l?void 0:l.split(" ")[0];if(!u)return;const m=await a(u);n({ShipDates:[new Date(d.ShipDate)],Colors:[d.Color],Labels:[{Id:d.Label,Name:d.Label||"BLANK"}],Reference:{Name:d.Ref,Id:d.Ref},Factory:m.Result.Items[0],Season:c(d.Season)},{Style:{Value:null===(i=d.Style)||void 0===i?void 0:i.split(" ")[0]},Po:{Po:s}}),o("")}catch(d){s(d)}}},l.createElement("input",{type:"text",placeholder:"Insert PO number to fill form data",value:r,onChange:e=>{var t;return o(null===(t=e.target.value)||void 0===t?void 0:t.trim())}}),l.createElement(g.A,{htmlType:"submit",type:"primary",disabled:!r,onClick:e=>e.target.blur()},"Fill form")):null},N=l.forwardRef(({page:e,defaultFactory:t,request:a,disabled:o,onFetchPoNumbers:E,onFetchStyles:g,onFetchControlSheet:N,onSave:A},F)=>{var D,w,V,R,I,k,L,P,T;const U=e=>{var t;A({Name:e.Name,ReferenceNumber:e.Reference.Id,Styles:e.Styles.map(e=>e.Value),Colors:e.Colors.map(e=>e.Value),Labels:e.Labels.map(e=>e.Id),CustomerId:null===(t=e.Customer)||void 0===t?void 0:t.Account,ShipDates:e.ShipDates.map(e=>(0,u.GV)(e.Date)),AllPos:e.AllPos.map(e=>e.Po),Season:e.Season,FactoryCode:e.Factory.Code,StatusId:e.StatusId})},[B,x]=(0,l.useState)({poNumbers:!1,styles:!1}),[q,O]=(0,l.useState)([]),[M,j]=(0,l.useState)([]),[G,Y]=(0,l.useState)([]),[$]=(0,v.q)(),{showError:z}=(0,h.d)(),{values:K,setValues:H,setFieldValue:Z,isEdited:_}=(0,m.m)({onSubmit:U}),J=e=>(0,n.format)((0,u.D5)(e),"DD-MM-YYYY"),W=(e,t)=>{H({Name:e.Name,Reference:e.Reference,Styles:(e.Styles||[]).map(e=>({Value:e})),Colors:(e.Colors||[]).map(e=>({Value:e})),Labels:e.Labels,Customer:e.Customer,ShipDates:(e.ShipDates||[]).map(e=>({Id:(0,c.v4)(),Date:(0,u.D5)(e),UniqueValue:J(e)})),AllPos:e.AllPos||[],Season:$.find(t=>{var a;return(null===(a=e.Season)||void 0===a?void 0:a.toLowerCase())==t.toLowerCase()}),Factory:e.Factory,ToSelect:t})};(0,l.useEffect)(()=>{a?W(a):H({Name:"",Reference:"",Styles:[],Colors:[],Labels:[],Customer:null,ShipDates:[],AllPos:[],Season:"",Factory:t||""})},[a]),(0,l.useEffect)(()=>{var e,t,a;Z("Name",[K.Season,null===(e=K.Factory)||void 0===e?void 0:e.Code,null===(t=K.Reference)||void 0===t?void 0:t.Id,...(K.Labels||[]).map(e=>e.Value),null===(a=K.Customer)||void 0===a?void 0:a.Name].filter(e=>!!e).join(" - "))},[K.Season,null===(D=K.Factory)||void 0===D?void 0:D.Code,null===(w=K.Reference)||void 0===w?void 0:w.Id,K.Customer,K.Labels]),(0,l.useEffect)(()=>{var e,t,a,l,n;null!==(e=K.Factory)&&void 0!==e&&e.Code&&null!==(t=K.Reference)&&void 0!==t&&t.Id&&null!==(a=K.ShipDates)&&void 0!==a&&a.length&&(async e=>{try{x(e=>({...e,poNumbers:!0}));const t=await E(e);O(t)}catch(t){z(t)}finally{x(e=>({...e,poNumbers:!1}))}})({FactoryCode:null===(l=K.Factory)||void 0===l?void 0:l.Code,RefNo:null===(n=K.Reference)||void 0===n?void 0:n.Id,ShipDate:K.ShipDates.map(e=>e.Date),Style:K.Styles.map(e=>({code:e.Value}))})},[null===(V=K.Factory)||void 0===V?void 0:V.Code,null===(R=K.Reference)||void 0===R?void 0:R.Id,null===(I=K.ShipDates)||void 0===I?void 0:I.length,null===(k=K.Styles)||void 0===k?void 0:k.length]),(0,l.useEffect)(()=>{var e;q&&K.AllPos&&j((0,r.uniqBy)([...q,...K.AllPos],"Po")),null!==(e=K.ToSelect)&&void 0!==e&&e.Po&&Z("AllPos",(0,r.uniq)([...K.AllPos||[],K.ToSelect.Po]))},[q]),(0,l.useEffect)(()=>{K.Reference&&((async e=>{try{x(e=>({...e,styles:!0}));const t=await g(e);Y(t)}catch(t){z(t)}finally{x(e=>({...e,styles:!1}))}})(K.Reference.Id),Y([]))},[K.Reference]),(0,l.useEffect)(()=>{var e;1===(null===G||void 0===G?void 0:G.length)&&Z("Styles",[G[0]]),null!==(e=K.ToSelect)&&void 0!==e&&e.Style&&Z("Styles",[K.ToSelect.Style])},[G,K.ToSelect]);return l.createElement(y.A,{ref:F,mainPath:e,values:K,isEdited:_(),canSave:!o&&Object.keys(K).filter(e=>!["ToSelect"].includes(e)).every(e=>["ShipDates","AllPos","Colors","Labels","Styles"].includes(e)?K[e].length>0:!!K[e]),onSave:U},l.createElement("form",{className:"info"},l.createElement("div",{className:s()({header:!0})},l.createElement(f.A,null,l.createElement(f.D,{name:"Name",disabled:o,readonly:!0},K.Name))),l.createElement("div",{className:"columns"},l.createElement("div",{className:"first"},l.createElement(f.A,null,l.createElement(f.D,{name:"Season"},l.createElement(S.A,{data:$,value:K.Season,filter:"contains",disabled:o,onChange:e=>Z("Season",e)})),l.createElement(f.D,{name:"Factory"},l.createElement(d.Ay,{keyField:"Code",disabled:o||!!t,selected:K.Factory,placeholder:"Search for factory",onSearch:p.N,onSelect:e=>Z("Factory",e)},e=>l.createElement("span",null,e.Code," / ",e.Name))),l.createElement(f.D,{name:"Managing Office",disabled:o,readonly:!0},(X=K.Factory)?X.VendorName?`${X.VendorCode} / ${X.VendorName}`:X.VendorCode:""),l.createElement(f.D,{name:"Country",disabled:o,readonly:!0},K.Factory?K.Factory.Country:""),l.createElement(f.D,{name:"Reference Number"},l.createElement(d.Ay,{disabled:o,selected:K.Reference,placeholder:"Search for reference",onSearch:p.FL,onSelect:e=>Z("Reference",e)},e=>l.createElement("span",null,e.Name))),l.createElement(f.D,{name:"Styles",multi:!0},l.createElement(d.RZ,{onSearch:e=>(0,d.St)(G.filter(t=>t.Value.toLowerCase().includes(e.toLowerCase()))),disabled:o||!K.Reference,selectedItems:K.Styles,onAdd:e=>Z("Styles",[...K.Styles,e]),onDelete:e=>Z("Styles",K.Styles.filter(t=>t!==e)),keyField:"Value",codeField:"Value",labelField:"Value"},e=>l.createElement(l.Fragment,null,e.Value))),l.createElement(f.D,{name:"Colors",multi:!0},l.createElement(d.RZ,{onSearch:p.zL,disabled:o,selectedItems:K.Colors,onAdd:e=>Z("Colors",[...K.Colors,e]),onDelete:e=>Z("Colors",K.Colors.filter(t=>t!==e)),keyField:"Value",codeField:"Value",labelField:"Value"},e=>l.createElement(l.Fragment,null,e.Value))),l.createElement(f.D,{name:"Labels",multi:!0},l.createElement(d.RZ,{placeholder:'For blank label search "BLANK"',onSearch:p.yN,disabled:o,selectedItems:K.Labels,onAdd:e=>Z("Labels",[...K.Labels,e]),onDelete:e=>Z("Labels",K.Labels.filter(t=>t!==e)),keyField:"Id",labelField:"Name"},e=>l.createElement(l.Fragment,null,e.Name))),l.createElement(f.D,{name:"Customer"},l.createElement(d.Ay,{disabled:o,keyField:"Account",codeField:"Account",selected:K.Customer,placeholder:"Search for customer",onSearch:p.cg,onSelect:e=>Z("Customer",e)},e=>l.createElement("span",null,e.Account," - ",e.Name))),l.createElement(f.D,{name:"Ship Dates",multi:!0},l.createElement("div",{className:"ship-dates"},(K.ShipDates||[]).map(e=>l.createElement(i.A,{key:e.Id,disabled:o,min:(0,n.addYears)(new Date,-5),max:(0,n.addYears)(new Date,5),value:e.Date,onChange:t=>((e,t)=>{const a=K.ShipDates.findIndex(t=>t.Id===e);Z("ShipDates",(0,r.uniqBy)([...K.ShipDates.slice(0,a),{...K.ShipDates[a],Date:t,UniqueValue:J(t)},...K.ShipDates.slice(a+1)],"UniqueValue"))})(e.Id,t),onClear:()=>{return t=e.Id,void Z("ShipDates",K.ShipDates.filter(e=>e.Id!==t));var t}})),!o&&l.createElement(i.A,{key:(0,c.v4)(),min:(0,n.addYears)(new Date,-5),max:(0,n.addYears)(new Date,5),value:null,onChange:e=>Z("ShipDates",(0,r.uniqBy)([...K.ShipDates,{Id:(0,c.v4)(),Date:e,UniqueValue:J(e)}],"UniqueValue"))}))))),l.createElement("div",{className:"second"},l.createElement(f.A,null,l.createElement(f.D,{name:"List ALL PO number",className:"po-numbers"},l.createElement(b,{idField:"Po",labelField:"Po",list:M,selected:K.AllPos,disabled:o||!(null!==(L=K.Factory)&&void 0!==L&&L.Code)||!(null!==(P=K.Reference)&&void 0!==P&&P.Id)||!(null===(T=K.ShipDate)||void 0===T||!T.length),isFetching:B.poNumbers,onToggle:(e,t)=>{Z("AllPos",t?[...K.AllPos,e]:K.AllPos.filter(t=>t.Po!==e.Po))}})),l.createElement(C,{isVisible:!a,onFetch:N,onFetchFactory:p.N,onFill:W}))))));var X})},92265:(e,t,a)=>{a.d(t,{A:()=>d});var l=a(65043),n=a(18672),r=a.n(n),o=a(98139),s=a.n(o),c=a(51404);const i=({min:e,max:t,value:a,touched:n,error:o,onChange:i,onClear:d,placeholder:u,onBlur:m,className:h,views:v,disabled:p})=>{const f=s()({datepicker:!0,[h]:h,"date-time-picker--error":n&&o});return l.createElement("div",{className:f},l.createElement("div",{className:"datepicker-content"},l.createElement(r(),{min:e,max:t,value:a,onChange:i,onBlur:m,views:v||["month","year","decade"],placeholder:u,disabled:p}),!!a&&!p&&l.createElement(c.A,{onClear:()=>{d?d():i(null)}})),n&&o&&l.createElement("span",{className:"date-time-picker__error"},o))};i.defaultProps={min:Date(1900,0,1),max:Date(2099,11,31),value:null};const d=i}}]);
//# sourceMappingURL=503.da25ce30.chunk.js.map